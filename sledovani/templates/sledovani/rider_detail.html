<!doctype html>
<html>
	<head>
		<title>[{{ rider }}] Sledovani</title>
		<meta name="viewport" contents="initial-scale=1.0, user-scalable=no">
		<meta charset="utf-8">
		
		<style>
			#map {
				height: 100%;
			}
			
			html, body {
				height: 100%;
				margin: 0;
				padding: 0;
			}
		</style>
	</head>
	<body>
		<p>delka: {{ rider.delka }}</p>
		<p>sirka: {{ rider.sirka }}</p>
		
		<div id="map"></div>
		<script>
			function initMap() {
				var map = new google.maps.Map(document.getElementById('map'), {
					center: {
						lat: -34.397,
						lng: 150.644
					},
					zoom: 6
				});
				
				var infoWindow = new google.maps.InfoWindow({map: map});
				
				// zkusime HTML Geolocation
				if (navigator.geolocation) {
					navigator.geolocation.getCurrentPosition(function(position) {
						var pos = {
							lat: position.coords.latitude,
							lng: position.coords.longitude
						};
						
						infoWindow.setPosition(pos);
						infoWindow.setContent('A mame te! [{{ rider }}]');
						map.setCenter(pos);
					}, function() {
						handleLocationError(true, infoWindow, map.getCenter());
					});
				} else {
					handleLocationError(false, infoWindow, map.getCenter());
				}
			}
			
			function handleLocationError(browserHasGeo, infoWindow, pos) {
				infoWindow.setPosition(pos);
				infoWindow.setContent(browserHasGeo ? 
														'Chyba! Geolokace spadla...' :
														'Chyba! Tvuj prohlizec nepodporuje geolokaci...');
			}
		</script>
		
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBAB8HPYGXSs_Ip3Wo1OIC7sI0m_DGTS34&callback=initMap"></script>
	</body>
</html>